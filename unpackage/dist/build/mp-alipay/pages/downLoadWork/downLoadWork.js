(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/downLoadWork/downLoadWork"],{"14cf":function(t,e,n){"use strict";var o=n("d0c7"),i=n.n(o);i.a},1980:function(t,e,n){"use strict";var o={uniCard:function(){return n.e("components/uni-card/uni-card").then(n.bind(null,"516e"))},uniFab:function(){return n.e("components/uni-fab/uni-fab").then(n.bind(null,"3e4f"))}},i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},"2f8d":function(t,e,n){"use strict";n.r(e);var o=n("1980"),i=n("40ca");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("14cf");var a,c=n("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"567b6a81",null,!1,o["a"],a);e["default"]=s.exports},"40ca":function(t,e,n){"use strict";n.r(e);var o=n("e880"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},c258:function(t,e,n){"use strict";(function(t){n("8b56");o(n("66fd"));var e=o(n("2f8d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("c11b")["createPage"])},d0c7:function(t,e,n){},e880:function(t,e,n){"use strict";(function(t){function o(t){return c(t)||a(t)||r(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return s(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(){n.e("components/uni-fab/uni-fab").then(function(){return resolve(n("3e4f"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/uni-card/uni-card").then(function(){return resolve(n("516e"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/mx-datepicker/mx-datepicker").then(function(){return resolve(n("8c12"))}.bind(null,n)).catch(n.oe)},l={components:{uniFab:u,uniCard:h,MxDatePicker:f},data:function(){return{resName:"",dayshift:"",workList:[],workListArr:[],searchBox:!1,pattern:{color:"#7A7E83",backgroundColor:"#fff",selectedColor:"#006dcb",buttonColor:"#006dcb"},content:[{iconPath:"/static/img/search.png",selectedIconPath:"/static/img/search-active.png",text:"精确筛选",active:!0},{iconPath:"/static/img/close.png",selectedIconPath:"/static/img/close-active.png",text:"取消筛选",active:!1}],showPicker:!1,searchWorkId:"",searchOpName:"",searchDayShift:"",searchStartTime:""}},computed:{i18n:function(){return this.$t("message")}},onLoad:function(t){console.log(t),this.resName=JSON.parse(t.resName),this.dayshift=t.dayshift,console.log(this.resName)},onShow:function(){t.setNavigationBarTitle({title:this.i18n.publicText.Msg_DownOrder_Title})},mounted:function(){this.getWorkPlan()},methods:{getWorkPlan:function(){var t=this;this.$HTTP({url:"DownOrder",data:{resName:this.resName.resourceName,dayshift:this.dayshift.toString()}}).then((function(e){var n,i;(console.log(e),200==e.statusCode)&&((n=t.workList).push.apply(n,o(e.data)),(i=t.workListArr).push.apply(i,o(e.data)),console.log(t.workList))}),(function(t){console.log(t.data)}))},downLoad:function(e){console.log(e);var n=this,o=e.orderUID;console.log(this.resName.resourceName),t.showModal({content:this.i18n.publicText.Msg_DownOrder_Message+e.workID,confirmText:this.i18n.publicText.datetime_confirm,cancelText:this.i18n.publicText.datetime_cancel,success:function(e){e.confirm&&n.$HTTP({url:"BeginDown",data:{resName:n.resName.resourceName,orderUID:o,dayshift:n.dayshift.toString()}}).then((function(e){console.log(e),e.data&&t.showToast({title:"工单拉取成功",success:function(){t.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})}})}),(function(t){console.log(t)}))}})},trigger:function(t){var e=this;0==t.index?(this.searchBox=!0!==this.searchBox,this.content[t.index].active=!t.item.active):1==t.index&&(this.content[t.index].active=!t.item.active,setTimeout((function(){e.content[t.index].active=!t.item.active,e.clearSearch()}),100))},fabClick:function(){this.searchBox=(this.searchBox,!1),this.content.forEach((function(t){t.active=(t.active,!1)}))},searchData:function(){var t,e=[],n=[],i=[];""!=this.searchWorkId&&(n.push(this.searchWorkId),i.push("workID")),""!=this.searchOpName&&(n.push(this.searchOpName),i.push("pmOpName")),""!=this.searchDayShift&&(n.push(this.searchDayShift),i.push("dayShift")),e=this.filterData(this.workListArr,n,i),this.workList=[],(t=this.workList).push.apply(t,o(e)),e=[]},filterData:function(t,e,n){console.log(n),console.log(e);var o=[];return t.forEach((function(t){for(var i=0;i<n.length;i++)if(-1==t[n[i]].toString().indexOf(e[i]))return;o.push(t)})),console.log(o),o},clearSearch:function(){this.searchDayShift="",this.searchWorkId="",this.searchOpName="",this.workList=this.workListArr},onSelected:function(t){this.showPicker=!1,t&&(this[this.type]=t.value)}}};e.default=l}).call(this,n("c11b")["default"])}},[["c258","common/runtime","common/vendor"]]]);